"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{80559:function(We,X,t){t.r(X),t.d(X,{default:function(){return $e}});var ue=t(15009),g=t.n(ue),ce=t(97857),E=t.n(ce),de=t(99289),B=t.n(de),he=t(5574),O=t.n(he),Q=t(68666),M=t(80854);function me(r,l){return H.apply(this,arguments)}function H(){return H=B()(g()().mark(function r(l,s){return g()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,M.request)("/api/login/captcha",E()({method:"GET",params:E()({},l)},s||{})));case 1:case"end":return v.stop()}},r)})),H.apply(this,arguments)}var Y=t(25004),J=t(87547),u=t(1413),c=t(67294),ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},fe=ve,q=t(91146),_=function(l,s){return c.createElement(q.Z,(0,u.Z)((0,u.Z)({},l),{},{ref:s,icon:fe}))};_.displayName="LockOutlined";var D=c.forwardRef(_),ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},pe=ge,ee=function(l,s){return c.createElement(q.Z,(0,u.Z)((0,u.Z)({},l),{},{ref:s,icon:pe}))};ee.displayName="MobileOutlined";var xe=c.forwardRef(ee),V=t(91),ye=t(89451),je=t(17093),Ze=t(94184),Se=t.n(Ze),Pe=t(34994),$=t(4942),Ce=t(98082),Fe=function(l){var s;return s={},(0,$.Z)(s,l.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:l.colorTextSecondary,fontSize:l.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),(0,$.Z)(s,"@media (min-width: @screen-md-min)",(0,$.Z)({},"".concat(l.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"})),s};function Te(r){return(0,Ce.Xj)("LoginForm",function(l){var s=(0,u.Z)((0,u.Z)({},l),{},{componentCls:".".concat(r)});return[Fe(s)]})}var e=t(85893),be=["logo","message","contentStyle","title","subTitle","actions","children"];function te(r){var l,s=r.logo,p=r.message,v=r.contentStyle,y=r.title,x=r.subTitle,T=r.actions,L=r.children,d=(0,V.Z)(r,be),Z=(0,ye.YB)(),N=d.submitter===!1?!1:(0,u.Z)((0,u.Z)({searchConfig:{submitText:Z.getMessage("loginForm.submitText","\u767B\u5F55")}},d.submitter),{},{submitButtonProps:(0,u.Z)({size:"large",style:{width:"100%"}},(l=d.submitter)===null||l===void 0?void 0:l.submitButtonProps),render:function(A,F){var P,m=F.pop();if(typeof(d==null||(P=d.submitter)===null||P===void 0?void 0:P.render)=="function"){var n,o;return d==null||(n=d.submitter)===null||n===void 0||(o=n.render)===null||o===void 0?void 0:o.call(n,A,F)}return m}}),R=(0,c.useContext)(je.ZP.ConfigContext),b=R.getPrefixCls("pro-form-login"),C=Te(b),k=C.wrapSSR,z=C.hashId,f=function(A){return"".concat(b,"-").concat(A," ").concat(z)},j=(0,c.useMemo)(function(){return s?typeof s=="string"?(0,e.jsx)("img",{src:s}):s:null},[s]);return k((0,e.jsxs)("div",{className:Se()(f("container"),z),children:[(0,e.jsxs)("div",{className:"".concat(f("top")," ").concat(z).trim(),children:[y||j?(0,e.jsxs)("div",{className:"".concat(f("header")),children:[j?(0,e.jsx)("span",{className:f("logo"),children:j}):null,y?(0,e.jsx)("span",{className:f("title"),children:y}):null]}):null,x?(0,e.jsx)("div",{className:f("desc"),children:x}):null]}),(0,e.jsxs)("div",{className:f("main"),style:(0,u.Z)({width:328},v),children:[(0,e.jsxs)(Pe.A,(0,u.Z)((0,u.Z)({isKeyPressSubmit:!0},d),{},{submitter:N,children:[p,L]})),T?(0,e.jsx)("div",{className:f("main-other"),children:T}):null]})]}))}var w=t(5966),G=t(74165),re=t(15861),W=t(97685),Ae=t(12029),Be=t(96365),we=t(71577),ne=t(90789),Le=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"],Re=c.forwardRef(function(r,l){var s=Ae.Z.useFormInstance(),p=(0,c.useState)(r.countDown||60),v=(0,W.Z)(p,2),y=v[0],x=v[1],T=(0,c.useState)(!1),L=(0,W.Z)(T,2),d=L[0],Z=L[1],N=(0,c.useState)(),R=(0,W.Z)(N,2),b=R[0],C=R[1],k=r.rules,z=r.name,f=r.phoneName,j=r.fieldProps,I=r.captchaTextRender,A=I===void 0?function(n,o){return n?"".concat(o," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:I,F=r.captchaProps,P=(0,V.Z)(r,Le),m=function(){var n=(0,re.Z)((0,G.Z)().mark(function o(h){return(0,G.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,C(!0),a.next=4,P.onGetCaptcha(h);case 4:C(!1),Z(!0),a.next=13;break;case 8:a.prev=8,a.t0=a.catch(0),Z(!1),C(!1),console.log(a.t0);case 13:case"end":return a.stop()}},o,null,[[0,8]])}));return function(h){return n.apply(this,arguments)}}();return(0,c.useImperativeHandle)(l,function(){return{startTiming:function(){return Z(!0)},endTiming:function(){return Z(!1)}}}),(0,c.useEffect)(function(){var n=0,o=r.countDown;return d&&(n=window.setInterval(function(){x(function(h){return h<=1?(Z(!1),clearInterval(n),o||60):h-1})},1e3)),function(){return clearInterval(n)}},[d]),(0,e.jsxs)("div",{style:(0,u.Z)((0,u.Z)({},j==null?void 0:j.style),{},{display:"flex",alignItems:"center"}),ref:l,children:[(0,e.jsx)(Be.Z,(0,u.Z)((0,u.Z)({},j),{},{style:{flex:1,transition:"width .3s",marginRight:8}})),(0,e.jsx)(we.ZP,(0,u.Z)((0,u.Z)({style:{display:"block"},disabled:d,loading:b},F),{},{onClick:(0,re.Z)((0,G.Z)().mark(function n(){var o;return(0,G.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,!f){i.next=9;break}return i.next=4,s.validateFields([f].flat(1));case 4:return o=s.getFieldValue([f].flat(1)),i.next=7,m(o);case 7:i.next=11;break;case 9:return i.next=11,m("");case 11:i.next=16;break;case 13:i.prev=13,i.t0=i.catch(0),console.log(i.t0);case 16:case"end":return i.stop()}},n,null,[[0,13]])})),children:A(d,y)}))]})}),ke=(0,ne.G)(Re),ze=ke,ae=t(22270),Ie=t(84567),se=t(56674),Me=["options","fieldProps","proFieldProps","valueEnum"],Ne=c.forwardRef(function(r,l){var s=r.options,p=r.fieldProps,v=r.proFieldProps,y=r.valueEnum,x=(0,V.Z)(r,Me);return(0,e.jsx)(se.Z,(0,u.Z)({ref:l,valueType:"checkbox",valueEnum:(0,ae.h)(y,void 0),fieldProps:(0,u.Z)({options:s},p),lightProps:(0,u.Z)({labelFormatter:function(){return(0,e.jsx)(se.Z,(0,u.Z)({ref:l,valueType:"checkbox",mode:"read",valueEnum:(0,ae.h)(y,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,u.Z)({options:s},p),proFieldProps:v},x))}},x.lightProps),proFieldProps:v},x))}),Ee=c.forwardRef(function(r,l){var s=r.fieldProps,p=r.children;return(0,e.jsx)(Ie.Z,(0,u.Z)((0,u.Z)({ref:l},s),{},{children:p}))}),Oe=(0,ne.G)(Ee,{valuePropName:"checked"}),ie=Oe;ie.Group=Ne;var De=ie,Ge=t(24556),He=t(38925),U=t(2453),le=t(56440),oe=t(67610),K=function(l){var s=l.content;return(0,e.jsx)(He.Z,{style:{marginBottom:24},message:s,type:"error",showIcon:!0})},Ve=function(){var l=(0,c.useState)({}),s=O()(l,1),p=s[0],v=(0,c.useState)("account"),y=O()(v,2),x=y[0],T=y[1],L=(0,c.useState)("account"),d=O()(L,2),Z=d[0],N=d[1],R=(0,c.useState)("login"),b=O()(R,2),C=b[0],k=b[1],z=(0,M.useModel)("@@initialState"),f=z.setInitialState,j=(0,Ge.l)(function(){return{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}}),I=function(){var m=B()(g()().mark(function n(o){var h,i;return g()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.prev=0,S.next=3,(0,Y.wu)(E()({},o));case 3:h=S.sent,i=new URL(window.location.href).searchParams,setTimeout(function(){M.history.push(i.get("redirect")||"/")},100),f({loginUser:h.data}),console.log(h),S.next=12;break;case 10:S.prev=10,S.t0=S.catch(0);case 12:case"end":return S.stop()}},n,null,[[0,10]])}));return function(o){return m.apply(this,arguments)}}(),A=function(){var m=B()(g()().mark(function n(o){var h;return g()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(o.checkUserpassword===o.userpassword){a.next=3;break}return U.ZP.error("\u4E24\u6B21\u5BC6\u7801\u8F93\u5165\u4E0D\u4E00\u81F4\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165\uFF01"),a.abrupt("return");case 3:return a.prev=3,a.next=6,(0,Y.Ot)(E()({},o));case 6:h=a.sent,U.ZP.success("\u6CE8\u518C\u6210\u529F\uFF0C\u8BF7\u767B\u5F55\uFF01"),k("login"),console.log(h),a.next=14;break;case 12:a.prev=12,a.t0=a.catch(3);case 14:case"end":return a.stop()}},n,null,[[3,12]])}));return function(o){return m.apply(this,arguments)}}(),F=p.status,P=p.type;return C==="login"?(0,e.jsxs)("div",{className:j,children:[(0,e.jsx)(M.Helmet,{children:(0,e.jsxs)("title",{children:["\u767B\u5F55","- ",oe.Z.title]})}),(0,e.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,e.jsxs)(te,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,e.jsx)("img",{alt:"logo",src:"/wechatphoto.jpeg"}),title:"X API",subTitle:"\u4E00\u4E2A API \u5F00\u653E\u8C03\u7528\u5E73\u53F0",initialValues:{autoLogin:!0},onFinish:function(){var m=B()(g()().mark(function n(o){return g()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,I(o);case 2:case"end":return i.stop()}},n)}));return function(n){return m.apply(this,arguments)}}(),children:[(0,e.jsx)(le.Z,{activeKey:x,onChange:T,centered:!0,items:[{key:"account",label:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"}]}),F==="error"&&P==="account"&&(0,e.jsx)(K,{content:"\u9519\u8BEF\u7684\u7528\u6237\u540D\u548C\u5BC6\u7801"}),x==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(w.Z,{name:"useraccount",fieldProps:{size:"large",prefix:(0,e.jsx)(J.Z,{})},placeholder:"\u7528\u6237\u540D (4~16\u4F4D)",rules:[{required:!0,message:"\u7528\u6237\u540D\u662F\u5FC5\u586B\u9879\uFF01"}]}),(0,e.jsx)(w.Z.Password,{name:"userpassword",fieldProps:{size:"large",prefix:(0,e.jsx)(D,{})},placeholder:"\u5BC6\u7801 (6~16\u4F4D)",rules:[{required:!0,message:"\u5BC6\u7801\u662F\u5FC5\u586B\u9879\uFF01"}]})]}),F==="error"&&P==="mobile"&&(0,e.jsx)(K,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),x==="mobile"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(w.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(xe,{})},name:"mobile",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01",rules:[{required:!0,message:"\u624B\u673A\u53F7\u662F\u5FC5\u586B\u9879\uFF01"},{pattern:/^1\d{10}$/,message:"\u4E0D\u5408\u6CD5\u7684\u624B\u673A\u53F7\uFF01"}]}),(0,e.jsx)(ze,{fieldProps:{size:"large",prefix:(0,e.jsx)(D,{})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01",captchaTextRender:function(n,o){return n?"".concat(o," ","\u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},name:"captcha",rules:[{required:!0,message:"\u9A8C\u8BC1\u7801\u662F\u5FC5\u586B\u9879\uFF01"}],onGetCaptcha:function(){var m=B()(g()().mark(function n(o){var h;return g()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,me({phone:o});case 2:if(h=a.sent,h){a.next=5;break}return a.abrupt("return");case 5:U.ZP.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return a.stop()}},n)}));return function(n){return m.apply(this,arguments)}}()})]}),(0,e.jsxs)("div",{style:{marginBottom:24},children:[(0,e.jsx)(De,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,e.jsx)("a",{style:{float:"right"},onClick:function(){k("regist")},children:"\u6CA1\u6709\u8D26\u53F7\uFF1F\u53BB\u6CE8\u518C"})]})]})}),(0,e.jsx)(Q.Z,{})]}):(0,e.jsxs)("div",{className:j,children:[(0,e.jsx)(M.Helmet,{children:(0,e.jsxs)("title",{children:["\u6CE8\u518C","- ",oe.Z.title]})}),(0,e.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,e.jsxs)(te,{submitter:{searchConfig:{submitText:"\u6CE8\u518C"}},contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,e.jsx)("img",{alt:"logo",src:"/wechatphoto.jpeg"}),title:"X API",subTitle:"\u4E00\u4E2A API \u5F00\u653E\u8C03\u7528\u5E73\u53F0",initialValues:{autoLogin:!0},onFinish:function(){var m=B()(g()().mark(function n(o){return g()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,A(o);case 2:case"end":return i.stop()}},n)}));return function(n){return m.apply(this,arguments)}}(),children:[(0,e.jsx)(le.Z,{activeKey:Z,onChange:N,centered:!0,items:[{key:"account",label:"\u8D26\u6237\u5BC6\u7801\u6CE8\u518C"}]}),F==="error"&&P==="mobile"&&(0,e.jsx)(K,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),Z==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(w.Z,{name:"useraccount",fieldProps:{size:"large",prefix:(0,e.jsx)(J.Z,{})},placeholder:"\u8D26\u53F7 (4~16\u4F4D)",rules:[{required:!0,pattern:/^.{3,16}$/,message:"\u8D26\u53F7\u5FC5\u987B\u5927\u4E8E3\u4E2A\u5B57\u7B26\u5E76\u4E14\u5C0F\u4E8E17\u4E2A\u5B57\u7B26"}]}),(0,e.jsx)(w.Z.Password,{name:"userpassword",fieldProps:{size:"large",prefix:(0,e.jsx)(D,{})},placeholder:"\u5BC6\u7801 (6~16\u4F4D)",rules:[{required:!0,pattern:/^.{5,16}$/,message:"\u5BC6\u7801\u5FC5\u987B\u5927\u4E8E5\u4E2A\u5B57\u7B26\u4E14\u5C0F\u4E8E17\u4E2A\u5B57\u7B26\uFF01"}]}),(0,e.jsx)(w.Z.Password,{name:"checkUserpassword",fieldProps:{size:"large",prefix:(0,e.jsx)(D,{})},placeholder:"\u786E\u8BA4\u5BC6\u7801",rules:[{required:!0,pattern:/^.{5,16}$/,message:"\u5BC6\u7801\u5FC5\u987B\u5927\u4E8E5\u4E2A\u5B57\u7B26\u4E14\u5C0F\u4E8E17\u4E2A\u5B57\u7B26\uFF01"}]})]}),(0,e.jsx)("div",{style:{marginBottom:24},children:(0,e.jsx)("a",{style:{float:"right",marginBottom:"24px"},onClick:function(){k("login")},children:"\u5DF2\u6709\u8D26\u53F7\uFF0C\u53BB\u767B\u9646!"})})]})}),(0,e.jsx)(Q.Z,{})]})},$e=Ve}}]);
